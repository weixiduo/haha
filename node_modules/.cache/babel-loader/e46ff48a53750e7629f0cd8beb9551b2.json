{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\nimport axios from \"axios\";\nimport store from '@/store'; //引入nprogress进度条\n\nimport nprogress from \"nprogress\"; //start进度条开始\n//done:j进度条结束\n//引入进度条样式\n\nimport \"nprogress/nprogress.css\";\nvar requests = axios.create({\n  //配置对象\n  //基本路径，发请求时会出现api\n  baseURL: \"/api\",\n  timeout: 10000\n}); //请求拦截，发请求前，请求拦截器可以检测到，可以在请求发出去前做一些事情\n\nrequests.interceptors.request.use(function (config) {\n  //游客身份加入购物车\n  if (store.state.detail.uuid_token) {\n    //请求头添加一个字段(userTempId):和后台老师商量好了\n    config.headers.userTempId = store.state.detail.uuid_token;\n  } //需要携带token带给服务器\n\n\n  if (store.state.user.token) {\n    config.headers.token = store.state.user.token;\n  }\n\n  nprogress.start();\n  return config;\n}); //响应拦截器\n\nrequests.interceptors.response.use(function (res) {\n  nprogress.done();\n  return res.data;\n}), function (error) {\n  return Promise.reject(error);\n};\nexport default requests;","map":{"version":3,"names":["axios","store","nprogress","requests","create","baseURL","timeout","interceptors","request","use","config","state","detail","uuid_token","headers","userTempId","user","token","start","response","res","done","data","error","Promise","reject"],"sources":["F:/vuexianmu/app/src/api/request.js"],"sourcesContent":["import axios from \"axios\";\r\nimport store from '@/store'\r\n\r\n//引入nprogress进度条\r\nimport nprogress from \"nprogress\";\r\n//start进度条开始\r\n//done:j进度条结束\r\n//引入进度条样式\r\nimport \"nprogress/nprogress.css\"\r\nconst requests =axios.create({\r\n    //配置对象\r\n    //基本路径，发请求时会出现api\r\n    baseURL:\"/api\",\r\n    timeout:10000,\r\n});\r\n//请求拦截，发请求前，请求拦截器可以检测到，可以在请求发出去前做一些事情\r\nrequests.interceptors.request.use((config)=>{\r\n    //游客身份加入购物车\r\n    if(store.state.detail.uuid_token){\r\n        //请求头添加一个字段(userTempId):和后台老师商量好了\r\n        config.headers.userTempId = store.state.detail.uuid_token;\r\n      }\r\n      //需要携带token带给服务器\r\n      if(store.state.user.token){\r\n        config.headers.token = store.state.user.token;\r\n      }\r\n    nprogress.start();\r\nreturn config;\r\n})\r\n//响应拦截器\r\nrequests.interceptors.response.use((res)=>{\r\nnprogress.done()\r\nreturn res.data;\r\n}),(error)=>{\r\n    return Promise.reject(error)\r\n}\r\n\r\nexport default requests;\r\n"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,SAAlB,C,CAEA;;AACA,OAAOC,SAAP,MAAsB,WAAtB,C,CACA;AACA;AACA;;AACA,OAAO,yBAAP;AACA,IAAMC,QAAQ,GAAEH,KAAK,CAACI,MAAN,CAAa;EACzB;EACA;EACAC,OAAO,EAAC,MAHiB;EAIzBC,OAAO,EAAC;AAJiB,CAAb,CAAhB,C,CAMA;;AACAH,QAAQ,CAACI,YAAT,CAAsBC,OAAtB,CAA8BC,GAA9B,CAAkC,UAACC,MAAD,EAAU;EACxC;EACA,IAAGT,KAAK,CAACU,KAAN,CAAYC,MAAZ,CAAmBC,UAAtB,EAAiC;IAC7B;IACAH,MAAM,CAACI,OAAP,CAAeC,UAAf,GAA4Bd,KAAK,CAACU,KAAN,CAAYC,MAAZ,CAAmBC,UAA/C;EACD,CALqC,CAMtC;;;EACA,IAAGZ,KAAK,CAACU,KAAN,CAAYK,IAAZ,CAAiBC,KAApB,EAA0B;IACxBP,MAAM,CAACI,OAAP,CAAeG,KAAf,GAAuBhB,KAAK,CAACU,KAAN,CAAYK,IAAZ,CAAiBC,KAAxC;EACD;;EACHf,SAAS,CAACgB,KAAV;EACJ,OAAOR,MAAP;AACC,CAZD,E,CAaA;;AACAP,QAAQ,CAACI,YAAT,CAAsBY,QAAtB,CAA+BV,GAA/B,CAAmC,UAACW,GAAD,EAAO;EAC1ClB,SAAS,CAACmB,IAAV;EACA,OAAOD,GAAG,CAACE,IAAX;AACC,CAHD,GAGG,UAACC,KAAD,EAAS;EACR,OAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,CALD;AAOA,eAAepB,QAAf"},"metadata":{},"sourceType":"module"}